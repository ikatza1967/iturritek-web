<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Gorka Jabonero" content="Alexander Galvez" content="Maily Rodriguez">
  <title>Iturritek-Contacto-Formulario</title>
  <link rel="stylesheet" href="../estilos/estilos-iturritek.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body>
  <div class="container-General">
    <div class="bg-principal-contact">
      <header class="header-cont-header">
        <nav class="navbar navbar-expand-lg navegador-general">

          <div class="container-fluid cont-menu">
            <a class="navbar-brand logo-cont" href="/index.html">
              <img class="logo" src="/imagenes/iturritek.webp" alt="logo iturritek">
            </a>
            <button class="navbar-toggler btn-nav" type="button" data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
              aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse cont-apartados" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link text-light" href="/index.html">INICIO</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-light" href="/index.html#quienesSomos">QUIENES SOMOS</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-light" href="/index.html#servicios">
                    SERVICIOS</a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link text-light" href="/index.html#grupoPenascal">
                    GRUPO PEÑASCAL
                  </a>
                </li>
                      <!-- <div class="dropdown">
                  <li class="nav-item idioma-responsive"><button class="nav-link text-light es">ES</button></li>
                  <li class="nav-item idioma-responsive"><button class="nav-link text-light eu">EU</button></li>
                  <li class="nav-item idioma-responsive"><button class="nav-link text-light en">EN</button></li>
              </div>  -->
              
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <main class="main-contact">
        <h2 class="contact-title">¿Hablamos?</h2>
        <div class="main-container">
          <div class="contact-descrip contact-detalles">
            <h3 class="titulos-card_contacto">Detalles de contacto</h3>
            <div class="">
              <p class="contact-paragraph">Belategi, 1 48002 BILBAO</p>
              <p>
                <span class="remarked contact-paragraph">Tel: </span>
                <a class="contact-info contact-paragraph" href="tel:+34944700793">944 700 793</a>
              </p>
              <p>
                <span class="remarked contact-paragraph">Email: </span>
                <a class="contact-info contact-paragraph" href="mailto:iturritek@iturritek.com">iturritek@iturritek.com</a>
              </p>
            </div>
            <figure class="container-mapa_contact">
              <div id="wrapper-9cd199b9cc5410cd3b1ad21cab2e54d3">
                <div id="map-9cd199b9cc5410cd3b1ad21cab2e54d3"></div>
              </div>
            </figure>
          </div>
          
          <div class="contact-descrip">
            <h3 class="titulos-card_contacto">Envíanos un mensaje</h3>


            <!-- Formulario de contacto ******************************** -->

            <form method="post" class="contact-form" onsubmit="enviarDatos(event)">
              <div class="contact-form_usuario">
                <input type="text" id="name" class="input-deco" name="user_name" placeholder="  Nombre * " />
                <input type="text" id="surname" class="input-deco" name="user_surname" placeholder="  Apellidos *"/>  
              </div>
              <div class="contact-form_datos">
                <input type="tel" class="datos-personales  input-deco input-tel" id="tel" name="user_tel" placeholder="  Teléfono *"/>
                <input type="email" class="datos-personales  input-deco" id="email" name="user_email" placeholder="  Email *" />  
              </div>

                <label for="servicio" class="servicio-interés contact-paragraph">¿En qué servicio está interesado?</label>
              <select name="select" class=" datos-servicio" >
                <option value="vacio"></option>
                <option value="Aire_acondicionado">Aire acondicionado</option>
                <option value="Fontaneria">Fontanería</option>
                <option value="Calefacción_y_gas">Calefacción y gas</option>
                <option value="Reformas">Reformas</option>
                <option value="Montajes">Montajes</option>
                <option value="Mantenimineto">Mantenimineto</option>
              </select>
              <textarea id="mensaje" name="message" rows="4" cols="50" class="datos-textarea" placeholder="  Cuéntanos"></textarea>

              <button id="btn-Form" type="submit"><img class="btn__Form-enviar" src="../imagenes/mensaje.gif" alt="" >Enviar</button>
            </form>

            
          </div>

        </div>

      </main>

    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/scripts/mapaAPI.js"></script>
  <script src="/scripts/funcionalidades.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>

    //Funcionalidad para enviar los datos del formulario al back
    function enviarDatos(event) {
        event.preventDefault();

        // Datos del formulario
        const user_name = document.getElementById("name").value;
        const user_surname = document.getElementById("surname").value;
        const user_tel = document.getElementById("tel").value;
        const user_email = document.getElementById("email").value;
        const select = document.querySelector(".datos-servicio").value;
        const message = document.getElementById("mensaje").value;

        // Metemos los datos en un obejto
        const datos = {
          user_name,
          user_surname,
          user_tel,
          user_email,
          select,
          message
        };

        console.log("Estos son los datos enviados para el back " + JSON.stringify(datos))

        // Solicitud al back
        axios.post("http://127.0.0.1:4000/recibir_datos", datos)
          .then(response => {
            console.log(response.data);
          })
          .catch(error => {
            console.error(error);
          });
      }
  </script>

</body>

</html>